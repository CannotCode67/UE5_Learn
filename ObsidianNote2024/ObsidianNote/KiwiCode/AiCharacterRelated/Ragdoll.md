Ragdoll is a technique where we apply multiple rigidbody components and colliders to corresponding joints of a character's skeleton, and let physics control the movement of the body, simulating a doll-like effect for the character.

We can apply ragdoll to character using what Unity provides, ragdoll wizard. In editor's top menu ("GameObject/3D object/Ragdoll"), we can open the ragdoll wizard window. We then need to fill up all the joints for ragdoll, by dragging the corresponding joints of our character's skeleton into the slots. Much like creating an avatar in Unity. Give it a mass you want, then hit create button. If you inspect the character's skeleton, you will find the joints used to fill up the slots now have a rigidbody, a collider and a character joint components assigned to it, except for the one used to fill up the pelvis slot. That one only gets a rigidbody and a collider.

The character has ragdoll applied, but if we enter play mode. It is not ragdolling, that's because the animator is taking control of the body through animation information. You may see the character jerks a bit, that's physics simulating the effect of each rigidbody through collider, but overall animator is holding the body. Because a character definitely uses animator, and before animator gets disabled, we actually don't want ragdoll to take effect. One way to do it is to enable the isKinematic property in the rigidbody, so that it cannot be affected by Physics while still be able to apply Physics influences to other Physics regulated objects. And when the character for example dies, we disable the animator, then disable the isKinematic property to turn ragdoll on. Another way to do it is to create a version of character with only ragdoll applied, no animator or other components. When the character dies, we instantiate the ragdoll version on the spot and disable the real character. Doing it this way saves us the overhead for carrying the extra physics components in the character game object. However, carrying them around brings the benefit of a more accurate physics simulation in raycast scenarios, and customization of different hit spots like head shot, which can be important for games involved shooting.

And if we decide to carry the extra colliders around for raycast accuracy, we will need to write a RagdollManager class to manage the activation and deactivation of the ragdoll. Supposely, when player fires its weapon and hits one of the colliders the ai character has, the physics function like raycast hit or on collider enter or others should invoke a take damage function somewhere. No way each joint object with ragdoll applied would have its own health script, unless that's the design to go for. Then, they should all link back to the same health script somehow. And sometimes, the character has a collider with a rigidbody or a character controller at its top level for reasons like locomotion or weapon pickup or physics detection or whatever. In order to avoid the situation where this collider constantly collides with the ragdoll colliders, we should put them in different physics layer or eaiser set the top collider to trigger so that it doesn't apply physics influence to ragdoll colliders. All these possible problems raised by carrying extra colliders around should be taken care of by the RagdollManager class.